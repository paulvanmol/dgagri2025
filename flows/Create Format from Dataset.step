{"creationTimeStamp":"2025-02-26T16:27:36.213Z","modifiedTimeStamp":"2025-02-26T21:52:03.084Z","createdBy":"sbxpav","modifiedBy":"sbxpav","name":"Create Format from Dataset.step","displayName":"Create Format from Dataset.step","localDisplayName":"Create Format from Dataset.step","properties":{},"links":[{"method":"GET","rel":"self","href":"/dataFlows/steps/5f8d4d37-01f0-4364-8c03-b2986831f3ab","uri":"/dataFlows/steps/5f8d4d37-01f0-4364-8c03-b2986831f3ab","type":"application/vnd.sas.data.flow.step"},{"method":"GET","rel":"alternate","href":"/dataFlows/steps/5f8d4d37-01f0-4364-8c03-b2986831f3ab","uri":"/dataFlows/steps/5f8d4d37-01f0-4364-8c03-b2986831f3ab","type":"application/vnd.sas.data.flow.step.summary"},{"method":"GET","rel":"up","href":"/dataFlows/steps","uri":"/dataFlows/steps","type":"application/vnd.sas.collection","itemType":"application/vnd.sas.data.flow.step.summary"},{"method":"PUT","rel":"update","href":"/dataFlows/steps/5f8d4d37-01f0-4364-8c03-b2986831f3ab","uri":"/dataFlows/steps/5f8d4d37-01f0-4364-8c03-b2986831f3ab","type":"application/vnd.sas.data.flow.step","responseType":"application/vnd.sas.data.flow.step"},{"method":"DELETE","rel":"delete","href":"/dataFlows/steps/5f8d4d37-01f0-4364-8c03-b2986831f3ab","uri":"/dataFlows/steps/5f8d4d37-01f0-4364-8c03-b2986831f3ab"},{"method":"POST","rel":"copy","href":"/dataFlows/steps/5f8d4d37-01f0-4364-8c03-b2986831f3ab/copy","uri":"/dataFlows/steps/5f8d4d37-01f0-4364-8c03-b2986831f3ab/copy","responseType":"application/vnd.sas.data.flow.step"},{"method":"GET","rel":"transferExport","href":"/dataFlows/steps/5f8d4d37-01f0-4364-8c03-b2986831f3ab","uri":"/dataFlows/steps/5f8d4d37-01f0-4364-8c03-b2986831f3ab","responseType":"application/vnd.sas.transfer.object"},{"method":"PUT","rel":"transferImportUpdate","href":"/dataFlows/steps/5f8d4d37-01f0-4364-8c03-b2986831f3ab","uri":"/dataFlows/steps/5f8d4d37-01f0-4364-8c03-b2986831f3ab","type":"application/vnd.sas.transfer.object","responseType":"application/vnd.sas.summary"}],"metadataVersion":0.0,"version":2,"type":"code","flowMetadata":{"inputPorts":[{"name":"table","displayName":"table","localDisplayName":"table","minEntries":1,"maxEntries":1,"defaultEntries":0,"type":"table"},{"name":"librarylist","displayName":"librarylist","localDisplayName":"librarylist","minEntries":0,"maxEntries":1,"defaultEntries":0,"type":"table"}],"outputPorts":[]},"ui":"{\n\t\"showPageContentOnly\": true,\n\t\"pages\": [\n\t\t{\n\t\t\t\"id\": \"Options\",\n\t\t\t\"type\": \"page\",\n\t\t\t\"label\": \"Options\",\n\t\t\t\"children\": [\n\t\t\t\t{\n\t\t\t\t\t\"id\": \"table\",\n\t\t\t\t\t\"type\": \"inputtable\",\n\t\t\t\t\t\"label\": \"Select Format Control dataset:\",\n\t\t\t\t\t\"required\": true,\n\t\t\t\t\t\"placeholder\": \"\",\n\t\t\t\t\t\"visible\": \"\"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"id\": \"librarylist\",\n\t\t\t\t\t\"type\": \"inputtable\",\n\t\t\t\t\t\"label\": \"Input table label 1\",\n\t\t\t\t\t\"required\": false,\n\t\t\t\t\t\"placeholder\": \"\",\n\t\t\t\t\t\"visible\": false,\n\t\t\t\t\t\"readonly\": true\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"id\": \"fmtname\",\n\t\t\t\t\t\"type\": \"textfield\",\n\t\t\t\t\t\"label\": \"Format Name:\",\n\t\t\t\t\t\"placeholder\": \"\",\n\t\t\t\t\t\"required\": false,\n\t\t\t\t\t\"visible\": \"\"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"id\": \"type\",\n\t\t\t\t\t\"type\": \"radiogroup\",\n\t\t\t\t\t\"label\": \"Format Type\",\n\t\t\t\t\t\"items\": [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"value\": \"C\",\n\t\t\t\t\t\t\t\"label\": \"Character Format\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"value\": \"N\",\n\t\t\t\t\t\t\t\"label\": \"Numeric Format\"\n\t\t\t\t\t\t}\n\t\t\t\t\t],\n\t\t\t\t\t\"visible\": \"\"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"id\": \"outputlib\",\n\t\t\t\t\t\"type\": \"radiogroup\",\n\t\t\t\t\t\"label\": \"Output Libraries\",\n\t\t\t\t\t\"items\": [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"value\": \"catalog\",\n\t\t\t\t\t\t\t\"label\": \"Format Catalog Locations\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"value\": \"curlib\",\n\t\t\t\t\t\t\t\"label\": \"Currently Assigned Libraries\"\n\t\t\t\t\t\t}\n\t\t\t\t\t],\n\t\t\t\t\t\"visible\": \"\"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"id\": \"liblist\",\n\t\t\t\t\t\"type\": \"columnselector\",\n\t\t\t\t\t\"label\": \"liblist\",\n\t\t\t\t\t\"include\": null,\n\t\t\t\t\t\"order\": false,\n\t\t\t\t\t\"columntype\": \"a\",\n\t\t\t\t\t\"max\": 1,\n\t\t\t\t\t\"min\": 1,\n\t\t\t\t\t\"visible\": false,\n\t\t\t\t\t\"readonly\": true,\n\t\t\t\t\t\"table\": \"librarylist\"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"id\": \"library\",\n\t\t\t\t\t\"type\": \"dropdown\",\n\t\t\t\t\t\"label\": \"Currently Assigned Libraries\",\n\t\t\t\t\t\"items\": {\n\t\t\t\t\t\t\"ref\": \"liblist\"\n\t\t\t\t\t},\n\t\t\t\t\t\"required\": true,\n\t\t\t\t\t\"placeholder\": \"\",\n\t\t\t\t\t\"visible\": [\n\t\t\t\t\t\t\"$outputlib\",\n\t\t\t\t\t\t\"=\",\n\t\t\t\t\t\t\"curlib\"\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"id\": \"catalog\",\n\t\t\t\t\t\"type\": \"textfield\",\n\t\t\t\t\t\"label\": \"Format Locations (WORK, LIBRARY, ...)\",\n\t\t\t\t\t\"placeholder\": \"type a library:\",\n\t\t\t\t\t\"required\": true,\n\t\t\t\t\t\"visible\": [\n\t\t\t\t\t\t\"$outputlib\",\n\t\t\t\t\t\t\"=\",\n\t\t\t\t\t\t\"catalog\"\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"id\": \"showother\",\n\t\t\t\t\t\"type\": \"checkbox\",\n\t\t\t\t\t\"label\": \"Specify Label for other Values\",\n\t\t\t\t\t\"visible\": \"\"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"id\": \"other\",\n\t\t\t\t\t\"type\": \"textfield\",\n\t\t\t\t\t\"label\": \"Other values:\",\n\t\t\t\t\t\"placeholder\": \"\",\n\t\t\t\t\t\"required\": true,\n\t\t\t\t\t\"visible\": \"$showother\"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"id\": \"length\",\n\t\t\t\t\t\"type\": \"numstepper\",\n\t\t\t\t\t\"label\": \"Maximum Label length:\",\n\t\t\t\t\t\"required\": true,\n\t\t\t\t\t\"integer\": true,\n\t\t\t\t\t\"min\": 1,\n\t\t\t\t\t\"max\": 32767,\n\t\t\t\t\t\"stepsize\": 1\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"id\": \"fmtlib\",\n\t\t\t\t\t\"type\": \"checkbox\",\n\t\t\t\t\t\"label\": \"Generate Summary Report:\",\n\t\t\t\t\t\"visible\": \"\"\n\t\t\t\t}\n\t\t\t]\n\t\t},\n\t\t{\n\t\t\t\"id\": \"Data\",\n\t\t\t\"type\": \"page\",\n\t\t\t\"label\": \"Data Roles\",\n\t\t\t\"children\": [\n\t\t\t\t{\n\t\t\t\t\t\"id\": \"Roles\",\n\t\t\t\t\t\"type\": \"section\",\n\t\t\t\t\t\"label\": \"Roles\",\n\t\t\t\t\t\"open\": true,\n\t\t\t\t\t\"visible\": \"\",\n\t\t\t\t\t\"children\": [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"id\": \"STARTN\",\n\t\t\t\t\t\t\t\"type\": \"columnselector\",\n\t\t\t\t\t\t\t\"label\": \"Start Column Numeric\",\n\t\t\t\t\t\t\t\"include\": null,\n\t\t\t\t\t\t\t\"order\": false,\n\t\t\t\t\t\t\t\"columntype\": \"n\",\n\t\t\t\t\t\t\t\"max\": 1,\n\t\t\t\t\t\t\t\"min\": 1,\n\t\t\t\t\t\t\t\"visible\": [\n\t\t\t\t\t\t\t\t\"$type\",\n\t\t\t\t\t\t\t\t\"=\",\n\t\t\t\t\t\t\t\t\"N\"\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\"table\": \"table\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"id\": \"STARTC\",\n\t\t\t\t\t\t\t\"type\": \"columnselector\",\n\t\t\t\t\t\t\t\"label\": \" Start Column Character\",\n\t\t\t\t\t\t\t\"include\": null,\n\t\t\t\t\t\t\t\"order\": false,\n\t\t\t\t\t\t\t\"columntype\": \"c\",\n\t\t\t\t\t\t\t\"max\": 1,\n\t\t\t\t\t\t\t\"min\": 1,\n\t\t\t\t\t\t\t\"visible\": [\n\t\t\t\t\t\t\t\t\"$type\",\n\t\t\t\t\t\t\t\t\"=\",\n\t\t\t\t\t\t\t\t\"C\"\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\"table\": \"table\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"id\": \"label\",\n\t\t\t\t\t\t\t\"type\": \"columnselector\",\n\t\t\t\t\t\t\t\"label\": \"Label Column\",\n\t\t\t\t\t\t\t\"include\": null,\n\t\t\t\t\t\t\t\"order\": false,\n\t\t\t\t\t\t\t\"columntype\": \"c\",\n\t\t\t\t\t\t\t\"max\": 1,\n\t\t\t\t\t\t\t\"min\": 1,\n\t\t\t\t\t\t\t\"visible\": \"\",\n\t\t\t\t\t\t\t\"table\": \"table\"\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t}\n\t\t\t]\n\t\t},\n\t\t{\n\t\t\t\"id\": \"About\",\n\t\t\t\"type\": \"page\",\n\t\t\t\"label\": \"About\",\n\t\t\t\"children\": [\n\t\t\t\t{\n\t\t\t\t\t\"id\": \"Information\",\n\t\t\t\t\t\"type\": \"text\",\n\t\t\t\t\t\"text\": \"The Create Format from Data Set Step enables you to create a SAS format by using data that is saved in a SAS data set. A SAS format enables you to map raw data values to a formatted value. You can create SAS formats for character or numeric data.\",\n\t\t\t\t\t\"visible\": \"\"\n\t\t\t\t}\n\t\t\t]\n\t\t}\n\t],\n\t\"syntaxversion\": \"1.3.0\",\n\t\"values\": {\n\t\t\"table\": {\n\t\t\t\"library\": \"\",\n\t\t\t\"table\": \"\"\n\t\t},\n\t\t\"librarylist\": {\n\t\t\t\"library\": \"SASHELP\",\n\t\t\t\"table\": \"VSLIB\"\n\t\t},\n\t\t\"fmtname\": \"myfmt\",\n\t\t\"type\": {\n\t\t\t\"value\": \"C\",\n\t\t\t\"label\": \"Character Format\"\n\t\t},\n\t\t\"outputlib\": {\n\t\t\t\"value\": \"catalog\",\n\t\t\t\"label\": \"Format Catalog Locations\"\n\t\t},\n\t\t\"liblist\": [\n\t\t\t{\n\t\t\t\t\"value\": \"libname\"\n\t\t\t}\n\t\t],\n\t\t\"library\": {\n\t\t\t\"value\": \"WORK\"\n\t\t},\n\t\t\"catalog\": \"WORK\",\n\t\t\"showother\": false,\n\t\t\"other\": \"Other\",\n\t\t\"length\": 20,\n\t\t\"fmtlib\": false,\n\t\t\"STARTN\": [],\n\t\t\"STARTC\": [],\n\t\t\"label\": []\n\t}\n}","templates":{"SAS":"/* SAS templated code goes here */\n%put &showother &fmtlib; \n%MACRO _Makefmt;\n/*  input-tabel */\n%IF &type=N %THEN %let START=&STARTN; \n%IF &type=C %THEN %let START=&STARTC; \n%IF &outputlib=curlib %then %let library=&library;\n%IF &outputlib=catalog %then %let library=&catalog;\n%IF &length<&label_1_rawlength %THEN %let length=&label_1_rawlength; \n /* --------------------------------------------------------------------\n Manipulates the incoming data into the correct format for PROC\n FORMAT to use as a CNTLIN data set.\n -------------------------------------------------------------------- */\nDATA __tmpformat;\n  /* Rename de involved columns */\n  length label $ &length; \n  SET &table (RENAME = (&START = Start &LABEL = Label)) end=last;\n  /* Retain Columns fmtname or type */\n  RETAIN Fmtname \"&FMTNAME\"\n         Type \"&TYPE\";\n  OUTPUT;\n  /* Evt.  */\n  %if &showother=1  %then %do;\n      if last=1 then do;\n         HLO=\"O\"; \n         Label = \"&other\";\n         OUTPUT;\n      end;\n  %end;\nRUN;\n\n/* Delete Possible Duplicates */\nPROC SORT DATA = __tmpformat nodupkey;\n  BY Start;\nRUN;\n\n /* --------------------------------------------------------------------\n    Creates a new format based on the data values contained within the\n    source data set.\n  -------------------------------------------------------------------- */\nPROC FORMAT LIBRARY = &LIBRARY CNTLIN = __tmpformat ;\nRUN;\n\n/* --------------------------------------------------------------------\n  Generates a summary report which describes the values and ranges\n  that make up the newly created format.\n  -------------------------------------------------------------------- */\n\n%IF &fmtlib=1 %THEN %DO; \n         PROC FORMAT LIBRARY=&library FMTLIB;\n%IF &TYPE=N %THEN %DO; select &fmtname; %END; \n%IF &TYPE=C %THEN %DO; SELECT $&fmtname; %END;\n         RUN;\n%END; \n/* Delete temporary datasets and macrovariables */\nPROC DATASETS LIBRARY = WORK;\n  DELETE __tmpformat;\n  RUN;\nQUIT;\n\n%MEND;\n\n%_MAKEFMT;\n"}}